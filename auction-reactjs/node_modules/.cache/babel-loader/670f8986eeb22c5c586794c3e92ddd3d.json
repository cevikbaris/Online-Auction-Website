{"ast":null,"code":"import { applyMiddleware, createStore, compose } from 'redux';\nimport authReducer from './Reducer';\nimport SecureLS from 'secure-ls';\nimport thunk from 'redux-thunk';\nimport { setAuthorizationHeader } from '../Api/ApiCalls';\nimport { createBid } from '../Api/ApiCalls';\nconst securels = new SecureLS(); //securels automatically encrypts the data and convert json\n\nconst getStateFromStorage = () => {\n  //storage'dan state çek\n  const localUser = securels.get('local-user'); //get with key\n\n  let stateInLocalStorage = {\n    //storage'dan gelen state boşsa bunu dön\n    isLoggedIn: false,\n    name: undefined,\n    username: undefined,\n    email: undefined,\n    image: undefined,\n    password: undefined,\n    roles: []\n  };\n\n  if (localUser) {\n    //storage'dan gelen state varsa\n    return localUser;\n  }\n\n  return stateInLocalStorage;\n};\n\nconst updateStateInStorage = newState => {\n  securels.set('local-user', newState); //key value\n};\n\nconst configureStore = () => {\n  //ilk başlangıc değerlerimiz. loggedInState ile birlikte kullanıcı giriş yapmış şekilde başlar\n  const initialState = getStateFromStorage();\n  setAuthorizationHeader(initialState);\n  const composeEnhancers = window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__ || compose;\n  const store = createStore(authReducer, getStateFromStorage(), composeEnhancers(applyMiddleware(thunk))); //thunk  authActionsda fonksiyon return ettiğimiz için lazım\n\n  store.subscribe(() => {\n    updateStateInStorage(store.getState());\n    setAuthorizationHeader(store.getState());\n  });\n  return store;\n};\n\nexport default configureStore;","map":{"version":3,"names":["applyMiddleware","createStore","compose","authReducer","SecureLS","thunk","setAuthorizationHeader","createBid","securels","getStateFromStorage","localUser","get","stateInLocalStorage","isLoggedIn","name","undefined","username","email","image","password","roles","updateStateInStorage","newState","set","configureStore","initialState","composeEnhancers","window","__REDUX_DEVTOOLS_EXTENSION_COMPOSE__","store","subscribe","getState"],"sources":["C:/Users/bar1s/Desktop/react/auction/src/Redux/ConfigureStore.js"],"sourcesContent":["import { applyMiddleware, createStore, compose } from 'redux';\r\nimport authReducer from './Reducer';\r\nimport SecureLS from 'secure-ls';\r\nimport thunk from 'redux-thunk';\r\nimport { setAuthorizationHeader } from '../Api/ApiCalls';\r\nimport { createBid} from '../Api/ApiCalls';\r\n\r\nconst securels = new SecureLS();\r\n//securels automatically encrypts the data and convert json\r\n\r\nconst getStateFromStorage = () => { //storage'dan state çek\r\n\r\n    const localUser = securels.get('local-user');//get with key\r\n\r\n    let stateInLocalStorage = { //storage'dan gelen state boşsa bunu dön\r\n        isLoggedIn: false,\r\n        name:undefined,\r\n        username: undefined,\r\n        email: undefined,\r\n        image: undefined,\r\n        password: undefined,\r\n        roles:[]\r\n    };\r\n\r\n    if (localUser) { //storage'dan gelen state varsa\r\n        return localUser;\r\n    }\r\n\r\n    return stateInLocalStorage;\r\n}\r\n\r\nconst updateStateInStorage = newState => {\r\n    securels.set('local-user', newState); //key value\r\n}\r\n\r\nconst configureStore = () => { //ilk başlangıc değerlerimiz. loggedInState ile birlikte kullanıcı giriş yapmış şekilde başlar\r\n   \r\n    const initialState=getStateFromStorage();\r\n    setAuthorizationHeader(initialState);\r\n    const composeEnhancers = window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__ || compose;\r\n    const store = createStore(authReducer, getStateFromStorage(),composeEnhancers(applyMiddleware(thunk) )); \r\n    //thunk  authActionsda fonksiyon return ettiğimiz için lazım\r\n   \r\n    store.subscribe(() => { \r\n        updateStateInStorage(store.getState());\r\n        setAuthorizationHeader(store.getState());\r\n    });\r\n    return store;\r\n}\r\n\r\nexport default configureStore;"],"mappings":"AAAA,SAASA,eAAT,EAA0BC,WAA1B,EAAuCC,OAAvC,QAAsD,OAAtD;AACA,OAAOC,WAAP,MAAwB,WAAxB;AACA,OAAOC,QAAP,MAAqB,WAArB;AACA,OAAOC,KAAP,MAAkB,aAAlB;AACA,SAASC,sBAAT,QAAuC,iBAAvC;AACA,SAASC,SAAT,QAAyB,iBAAzB;AAEA,MAAMC,QAAQ,GAAG,IAAIJ,QAAJ,EAAjB,C,CACA;;AAEA,MAAMK,mBAAmB,GAAG,MAAM;EAAE;EAEhC,MAAMC,SAAS,GAAGF,QAAQ,CAACG,GAAT,CAAa,YAAb,CAAlB,CAF8B,CAEe;;EAE7C,IAAIC,mBAAmB,GAAG;IAAE;IACxBC,UAAU,EAAE,KADU;IAEtBC,IAAI,EAACC,SAFiB;IAGtBC,QAAQ,EAAED,SAHY;IAItBE,KAAK,EAAEF,SAJe;IAKtBG,KAAK,EAAEH,SALe;IAMtBI,QAAQ,EAAEJ,SANY;IAOtBK,KAAK,EAAC;EAPgB,CAA1B;;EAUA,IAAIV,SAAJ,EAAe;IAAE;IACb,OAAOA,SAAP;EACH;;EAED,OAAOE,mBAAP;AACH,CAnBD;;AAqBA,MAAMS,oBAAoB,GAAGC,QAAQ,IAAI;EACrCd,QAAQ,CAACe,GAAT,CAAa,YAAb,EAA2BD,QAA3B,EADqC,CACC;AACzC,CAFD;;AAIA,MAAME,cAAc,GAAG,MAAM;EAAE;EAE3B,MAAMC,YAAY,GAAChB,mBAAmB,EAAtC;EACAH,sBAAsB,CAACmB,YAAD,CAAtB;EACA,MAAMC,gBAAgB,GAAGC,MAAM,CAACC,oCAAP,IAA+C1B,OAAxE;EACA,MAAM2B,KAAK,GAAG5B,WAAW,CAACE,WAAD,EAAcM,mBAAmB,EAAjC,EAAoCiB,gBAAgB,CAAC1B,eAAe,CAACK,KAAD,CAAhB,CAApD,CAAzB,CALyB,CAMzB;;EAEAwB,KAAK,CAACC,SAAN,CAAgB,MAAM;IAClBT,oBAAoB,CAACQ,KAAK,CAACE,QAAN,EAAD,CAApB;IACAzB,sBAAsB,CAACuB,KAAK,CAACE,QAAN,EAAD,CAAtB;EACH,CAHD;EAIA,OAAOF,KAAP;AACH,CAbD;;AAeA,eAAeL,cAAf"},"metadata":{},"sourceType":"module"}