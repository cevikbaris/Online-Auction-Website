{"ast":null,"code":"import _slicedToArray from\"C:/Users/bar1s/Desktop/react/auction/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import{useState,useEffect}from'react';import axios from'axios';//`/api/1.0/users/${username}/hoaxes?page=` : '/api/1.0/hoaxes?page=';\nexport var useApiProgress=function useApiProgress(apiMethod,apiPath,strictPath){var _useState=useState(false),_useState2=_slicedToArray(_useState,2),pendingApiCall=_useState2[0],setPendingApiCall=_useState2[1];useEffect(function(){var requestInterceptor,responseInterceptor;var updateApiCallFor=function updateApiCallFor(method,url,inProgress){if(method!==apiMethod){return;}if(strictPath&&url===apiPath){setPendingApiCall(inProgress);}else if(!strictPath&&url.startsWith(apiPath)){setPendingApiCall(inProgress);}};var registerInterceptors=function registerInterceptors(){requestInterceptor=axios.interceptors.request.use(function(request){//url: \"/api/1.0/hoaxes?page=0\"\n//url: \"/api/1.0/users/user1\"\n//method: \"get\"\nvar url=request.url,method=request.method;updateApiCallFor(method,url,true);return request;});responseInterceptor=axios.interceptors.response.use(function(response){var _response$config=response.config,url=_response$config.url,method=_response$config.method;updateApiCallFor(method,url,false);return response;},function(error){var _error$config=error.config,url=_error$config.url,method=_error$config.method;updateApiCallFor(method,url,false);throw error;});};var unregisterInterceptors=function unregisterInterceptors(){//kaldırma işlemi\naxios.interceptors.request.eject(requestInterceptor);axios.interceptors.response.eject(responseInterceptor);};registerInterceptors();return function unmount(){unregisterInterceptors();};},[apiPath,apiMethod,strictPath]);return pendingApiCall;};","map":{"version":3,"names":["useState","useEffect","axios","useApiProgress","apiMethod","apiPath","strictPath","pendingApiCall","setPendingApiCall","requestInterceptor","responseInterceptor","updateApiCallFor","method","url","inProgress","startsWith","registerInterceptors","interceptors","request","use","response","config","error","unregisterInterceptors","eject","unmount"],"sources":["C:/Users/bar1s/Desktop/react/auction/src/Shared/ApiProgress.js"],"sourcesContent":["import { useState, useEffect } from 'react';\r\nimport axios from 'axios';\r\n\r\n//`/api/1.0/users/${username}/hoaxes?page=` : '/api/1.0/hoaxes?page=';\r\n\r\nexport const useApiProgress = (apiMethod, apiPath, strictPath) => {\r\n  const [pendingApiCall, setPendingApiCall] = useState(false);\r\n\r\n  useEffect(() => {\r\n    let requestInterceptor, responseInterceptor;\r\n\r\n    const updateApiCallFor = (method, url, inProgress) => {\r\n      if (method !== apiMethod) {\r\n        return;\r\n      }\r\n      if (strictPath && url === apiPath) {\r\n        setPendingApiCall(inProgress);\r\n      } else if (!strictPath && url.startsWith(apiPath)) {\r\n        setPendingApiCall(inProgress);\r\n      }\r\n    };\r\n\r\n    const registerInterceptors = () => {\r\n      requestInterceptor = axios.interceptors.request.use(request => {\r\n\r\n        //url: \"/api/1.0/hoaxes?page=0\"\r\n        //url: \"/api/1.0/users/user1\"\r\n        //method: \"get\"\r\n        const { url, method } = request;\r\n        updateApiCallFor(method, url, true);\r\n        return request;\r\n      });\r\n\r\n      responseInterceptor = axios.interceptors.response.use(\r\n        response => {\r\n          const { url, method } = response.config;\r\n          updateApiCallFor(method, url, false);\r\n          return response;\r\n        },\r\n\r\n        error => {\r\n          const { url, method } = error.config;\r\n          updateApiCallFor(method, url, false);\r\n          throw error;\r\n        }\r\n      );\r\n    };\r\n\r\n    const unregisterInterceptors = () => { //kaldırma işlemi\r\n      axios.interceptors.request.eject(requestInterceptor);\r\n      axios.interceptors.response.eject(responseInterceptor);\r\n    };\r\n\r\n    registerInterceptors();\r\n\r\n    return function unmount() {\r\n      unregisterInterceptors();\r\n    };\r\n  }, [apiPath, apiMethod, strictPath]);\r\n\r\n\r\n  return pendingApiCall;\r\n};"],"mappings":"0HAAA,OAASA,QAAT,CAAmBC,SAAnB,KAAoC,OAApC,CACA,MAAOC,MAAP,KAAkB,OAAlB,CAEA;AAEA,MAAO,IAAMC,eAAc,CAAG,QAAjBA,eAAiB,CAACC,SAAD,CAAYC,OAAZ,CAAqBC,UAArB,CAAoC,CAChE,cAA4CN,QAAQ,CAAC,KAAD,CAApD,wCAAOO,cAAP,eAAuBC,iBAAvB,eAEAP,SAAS,CAAC,UAAM,CACd,GAAIQ,mBAAJ,CAAwBC,mBAAxB,CAEA,GAAMC,iBAAgB,CAAG,QAAnBA,iBAAmB,CAACC,MAAD,CAASC,GAAT,CAAcC,UAAd,CAA6B,CACpD,GAAIF,MAAM,GAAKR,SAAf,CAA0B,CACxB,OACD,CACD,GAAIE,UAAU,EAAIO,GAAG,GAAKR,OAA1B,CAAmC,CACjCG,iBAAiB,CAACM,UAAD,CAAjB,CACD,CAFD,IAEO,IAAI,CAACR,UAAD,EAAeO,GAAG,CAACE,UAAJ,CAAeV,OAAf,CAAnB,CAA4C,CACjDG,iBAAiB,CAACM,UAAD,CAAjB,CACD,CACF,CATD,CAWA,GAAME,qBAAoB,CAAG,QAAvBA,qBAAuB,EAAM,CACjCP,kBAAkB,CAAGP,KAAK,CAACe,YAAN,CAAmBC,OAAnB,CAA2BC,GAA3B,CAA+B,SAAAD,OAAO,CAAI,CAE7D;AACA;AACA;AACA,GAAQL,IAAR,CAAwBK,OAAxB,CAAQL,GAAR,CAAaD,MAAb,CAAwBM,OAAxB,CAAaN,MAAb,CACAD,gBAAgB,CAACC,MAAD,CAASC,GAAT,CAAc,IAAd,CAAhB,CACA,MAAOK,QAAP,CACD,CARoB,CAArB,CAUAR,mBAAmB,CAAGR,KAAK,CAACe,YAAN,CAAmBG,QAAnB,CAA4BD,GAA5B,CACpB,SAAAC,QAAQ,CAAI,CACV,qBAAwBA,QAAQ,CAACC,MAAjC,CAAQR,GAAR,kBAAQA,GAAR,CAAaD,MAAb,kBAAaA,MAAb,CACAD,gBAAgB,CAACC,MAAD,CAASC,GAAT,CAAc,KAAd,CAAhB,CACA,MAAOO,SAAP,CACD,CALmB,CAOpB,SAAAE,KAAK,CAAI,CACP,kBAAwBA,KAAK,CAACD,MAA9B,CAAQR,GAAR,eAAQA,GAAR,CAAaD,MAAb,eAAaA,MAAb,CACAD,gBAAgB,CAACC,MAAD,CAASC,GAAT,CAAc,KAAd,CAAhB,CACA,KAAMS,MAAN,CACD,CAXmB,CAAtB,CAaD,CAxBD,CA0BA,GAAMC,uBAAsB,CAAG,QAAzBA,uBAAyB,EAAM,CAAE;AACrCrB,KAAK,CAACe,YAAN,CAAmBC,OAAnB,CAA2BM,KAA3B,CAAiCf,kBAAjC,EACAP,KAAK,CAACe,YAAN,CAAmBG,QAAnB,CAA4BI,KAA5B,CAAkCd,mBAAlC,EACD,CAHD,CAKAM,oBAAoB,GAEpB,MAAO,SAASS,QAAT,EAAmB,CACxBF,sBAAsB,GACvB,CAFD,CAGD,CAlDQ,CAkDN,CAAClB,OAAD,CAAUD,SAAV,CAAqBE,UAArB,CAlDM,CAAT,CAqDA,MAAOC,eAAP,CACD,CAzDM"},"metadata":{},"sourceType":"module"}