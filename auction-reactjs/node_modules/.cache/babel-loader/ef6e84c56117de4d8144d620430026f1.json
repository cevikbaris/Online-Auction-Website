{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\bar1s\\\\Desktop\\\\react\\\\auction\\\\src\\\\Components\\\\VerifyAccount.js\",\n    _s = $RefreshSig$();\n\nimport React from 'react';\nimport Input from './Input';\nimport { useEffect, useState } from 'react';\nimport ButtonWithProgress from './ButtonWithProgress';\nimport { postIdImage, putIdentity } from '../Api/ApiCalls';\nimport { useSelector } from 'react-redux';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nconst VerifyAccount = () => {\n  _s();\n\n  const [validationErrors, setValidationErrors] = useState({});\n  const [newImage, setNewImage] = useState();\n  const [idNumber, setIdNumber] = useState();\n  const [imageId, setImageId] = useState();\n  const {\n    username: loggedInUsername\n  } = useSelector(store => ({\n    username: store.username\n  })); // useEffect(() => {\n  //     setValidationErrors(previousValidationErrors => ({\n  //         ...previousValidationErrors,\n  //     }));\n  // }, [newImage]);\n\n  const onChangeFile = event => {\n    if (event.target.files.length < 1) {\n      return;\n    }\n\n    const file = event.target.files[0];\n    const fileReader = new FileReader();\n\n    fileReader.onload = () => {\n      setNewImage(fileReader.result);\n      uploadFile(file);\n    };\n\n    fileReader.readAsDataURL(file);\n  };\n\n  const uploadFile = async file => {\n    const attachment = new FormData();\n    attachment.append('file', file);\n    const response = await postIdImage(attachment);\n    console.log(\"response\", response);\n    setImageId(response.data.id);\n  };\n\n  const saveId = async () => {\n    const body = {\n      idNumber,\n      imageId,\n      loggedInUsername\n    };\n\n    try {\n      const response = await putIdentity(body);\n      console.log(\"response\", response);\n    } catch (error) {\n      console.log(error);\n    }\n  };\n\n  const {\n    image: imageError,\n    idNumber: idNumberError\n  } = validationErrors;\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"container card\",\n    style: {\n      background: '#f3f5f5'\n    },\n    children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n      className: \"text-center card-header\",\n      children: \"ID Verification\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 64,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"card-body\",\n      children: [/*#__PURE__*/_jsxDEV(\"img\", {\n        className: \"img-thumbnail\",\n        width: \"400\",\n        height: \"400\",\n        src: newImage,\n        alt: \"...\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 67,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(Input, {\n        label: \"Add ID photo\",\n        type: \"file\",\n        onChange: onChangeFile,\n        error: imageError\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 69,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"hr\", {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 70,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(Input, {\n        label: \"ID number\",\n        type: \"text\",\n        onChange: event => {\n          setIdNumber(event.target.value);\n        },\n        error: idNumberError\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 72,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(ButtonWithProgress, {\n        onClick: saveId,\n        text: \"Upload ID\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 74,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 65,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 63,\n    columnNumber: 9\n  }, this);\n};\n\n_s(VerifyAccount, \"RWtHZ+z5Ksw9BXVmOJ4wIXlruJk=\", false, function () {\n  return [useSelector];\n});\n\n_c = VerifyAccount;\nexport default VerifyAccount;\n\nvar _c;\n\n$RefreshReg$(_c, \"VerifyAccount\");","map":{"version":3,"names":["React","Input","useEffect","useState","ButtonWithProgress","postIdImage","putIdentity","useSelector","VerifyAccount","validationErrors","setValidationErrors","newImage","setNewImage","idNumber","setIdNumber","imageId","setImageId","username","loggedInUsername","store","onChangeFile","event","target","files","length","file","fileReader","FileReader","onload","result","uploadFile","readAsDataURL","attachment","FormData","append","response","console","log","data","id","saveId","body","error","image","imageError","idNumberError","background","value"],"sources":["C:/Users/bar1s/Desktop/react/auction/src/Components/VerifyAccount.js"],"sourcesContent":["import React from 'react';\r\nimport Input from './Input';\r\nimport { useEffect, useState } from 'react';\r\nimport ButtonWithProgress from './ButtonWithProgress';\r\nimport { postIdImage , putIdentity} from '../Api/ApiCalls';\r\nimport { useSelector } from 'react-redux';\r\n\r\nconst VerifyAccount = () => {\r\n\r\n    const [validationErrors, setValidationErrors] = useState({});\r\n    const [newImage, setNewImage] = useState();\r\n    const [idNumber, setIdNumber] = useState();\r\n    const [ imageId , setImageId ] = useState();\r\n    const { username: loggedInUsername } = useSelector(store => ({ username: store.username }));\r\n\r\n\r\n    // useEffect(() => {\r\n    //     setValidationErrors(previousValidationErrors => ({\r\n    //         ...previousValidationErrors,\r\n    //     }));\r\n    // }, [newImage]);\r\n\r\n    const onChangeFile = (event) => {\r\n        if (event.target.files.length < 1) {\r\n            return;\r\n        }\r\n        const file = event.target.files[0];\r\n        const fileReader = new FileReader();\r\n        fileReader.onload = () => {\r\n            setNewImage(fileReader.result);\r\n            uploadFile(file);\r\n        }\r\n        fileReader.readAsDataURL(file);\r\n    }\r\n\r\n    const uploadFile = async file => {\r\n        const attachment = new FormData();\r\n        attachment.append('file', file);\r\n        const response = await postIdImage(attachment);\r\n        console.log(\"response\",response)\r\n        setImageId(response.data.id);\r\n    };\r\n\r\n\r\n    const saveId = async () => {\r\n        const body={\r\n            idNumber,\r\n            imageId,\r\n            loggedInUsername\r\n        }\r\n        try{\r\n            const response = await putIdentity(body)\r\n            console.log(\"response\",response)\r\n        }catch(error){\r\n            console.log(error)\r\n        }\r\n\r\n    }\r\n\r\n    const { image: imageError, idNumber: idNumberError } = validationErrors;\r\n\r\n    return (\r\n        <div className='container card' style={{ background: '#f3f5f5' }}>\r\n            <h2 className='text-center card-header'>ID Verification</h2>\r\n            <div className='card-body'>\r\n\r\n                <img className='img-thumbnail' width=\"400\" height=\"400\" src={newImage} alt='...' />\r\n\r\n                <Input label='Add ID photo' type=\"file\" onChange={onChangeFile} error={imageError} />\r\n                <hr />\r\n\r\n                <Input label='ID number' type=\"text\" onChange={event => { setIdNumber(event.target.value) }} error={idNumberError} />\r\n\r\n                <ButtonWithProgress onClick={saveId} text='Upload ID' />\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default VerifyAccount;"],"mappings":"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"},"metadata":{},"sourceType":"module"}