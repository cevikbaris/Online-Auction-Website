{"ast":null,"code":"import _slicedToArray from\"C:/Users/bar1s/Desktop/react/auction/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useState,useRef,useEffect}from'react';import{Link}from'react-router-dom';import{useDispatch,useSelector}from'react-redux';import{logoutSuccess}from'../Redux/Actions';import ProfileImageWithDefault from'./ProfileImageWithDefault';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var Topbar=function Topbar(){var _useSelector=useSelector(function(store){return{username:store.username,isLoggedIn:store.isLoggedIn,name:store.name,image:store.image,roles:store.roles};}),username=_useSelector.username,isLoggedIn=_useSelector.isLoggedIn,name=_useSelector.name,image=_useSelector.image,roles=_useSelector.roles;var isAdmin=roles.some(function(role){return role.name==='ROLE_ADMIN';});var menuArea=useRef(null);var _useState=useState(false),_useState2=_slicedToArray(_useState,2),menuVisible=_useState2[0],setMenuVisible=_useState2[1];var dispatch=useDispatch();useEffect(function(){document.addEventListener('click',menuClickTracker);return function(){document.removeEventListener('click',menuClickTracker);};},[isLoggedIn]);//nereye tıkladığımıza bakıyor\nvar menuClickTracker=function menuClickTracker(event){//menüyü temsil ediyor meniye koyduk çünkü htmlde\nif(menuArea.current===null||!menuArea.current.contains(event.target)){setMenuVisible(false);}};var onLogoutSuccess=function onLogoutSuccess(){dispatch(logoutSuccess());};var links=/*#__PURE__*/_jsxs(\"ul\",{className:\"navbar-nav ml-auto\",children:[/*#__PURE__*/_jsx(\"li\",{children:/*#__PURE__*/_jsx(Link,{className:\"nav-link\",to:\"/login\",children:\"Login\"})}),/*#__PURE__*/_jsx(\"li\",{className:\"px-4\",children:/*#__PURE__*/_jsx(Link,{className:\"nav-link\",to:\"/signup\",children:\"Signup\"})})]});if(isLoggedIn){var dropDownClass='dropdown-menu p-0 shadow';if(menuVisible){dropDownClass+=' show';}var profileButton='navbar-nav ml-auto';if(isAdmin){profileButton='navbar-nav ml-2';}links=/*#__PURE__*/_jsx(\"ul\",{className:profileButton,ref:menuArea,children:/*#__PURE__*/_jsxs(\"li\",{className:\"nav-item dropdown\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"d-flex\",style:{cursor:'pointer'},onClick:function onClick(){return setMenuVisible(true);},children:[/*#__PURE__*/_jsx(ProfileImageWithDefault,{image:image,width:\"32\",height:\"32\",className:\"rounded-circle my-1\"}),/*#__PURE__*/_jsx(\"span\",{className:\"nav-link dropdown-toggle\",children:name})]}),/*#__PURE__*/_jsxs(\"div\",{className:dropDownClass,children:[/*#__PURE__*/_jsxs(Link,{className:\"dropdown-item d-flex p-2\",to:\"/user/\".concat(username),onClick:function onClick(){return setMenuVisible(false);},children:[/*#__PURE__*/_jsx(\"i\",{className:\"material-icons text-info mr-2\",children:\"person\"}),\"My Profile\"]}),/*#__PURE__*/_jsxs(Link,{className:\"dropdown-item d-flex p-2\",to:'/addproduct',children:[/*#__PURE__*/_jsx(\"i\",{className:\"material-icons text-info mr-2\",children:\"add_box\"}),\"Add New Product\"]}),/*#__PURE__*/_jsxs(Link,{className:\"dropdown-item d-flex p-2\",to:'/my-bids',children:[/*#__PURE__*/_jsx(\"span\",{className:\"material-icons\",children:\"done\"}),\"My Bids\"]}),/*#__PURE__*/_jsx(Link,{to:'/',children:/*#__PURE__*/_jsxs(\"span\",{className:\"dropdown-item  d-flex p-2\",onClick:onLogoutSuccess,style:{cursor:'pointer'},children:[/*#__PURE__*/_jsx(\"i\",{className:\"material-icons text-danger mr-2\",children:\"power_settings_new\"}),\"Logout\"]})})]})]})});}return/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(\"div\",{className:\" shadow-sm bg-light mb-2 d-flex\",children:/*#__PURE__*/_jsxs(\"nav\",{className:\"navbar navbar-light bg-light container navbar-expand\",children:[/*#__PURE__*/_jsx(Link,{className:\"navbar-brand \",to:\"/\",children:/*#__PURE__*/_jsx(\"img\",{src:\"https://thumbs.dreamstime.com/b/auction-banner-template-ribbon-label-sign-177647990.jpg\",width:\"144\",height:\"90\",className:\"d-inline-block align-top\",alt:\"brand-img\"})}),isAdmin&&/*#__PURE__*/_jsx(\"div\",{className:\"nav-item ml-auto mr-0\",children:/*#__PURE__*/_jsx(Link,{className:\"nav-link\",to:\"/admin\",children:/*#__PURE__*/_jsx(\"button\",{type:\"button\",className:\"btn btn-secondary\",children:\" Admin Panel \"})})}),links]})})});};export default Topbar;","map":{"version":3,"names":["React","useState","useRef","useEffect","Link","useDispatch","useSelector","logoutSuccess","ProfileImageWithDefault","Topbar","store","username","isLoggedIn","name","image","roles","isAdmin","some","role","menuArea","menuVisible","setMenuVisible","dispatch","document","addEventListener","menuClickTracker","removeEventListener","event","current","contains","target","onLogoutSuccess","links","dropDownClass","profileButton","cursor"],"sources":["C:/Users/bar1s/Desktop/react/auction/src/Components/Topbar.js"],"sourcesContent":["import React, { useState, useRef, useEffect } from 'react'\r\nimport { Link } from 'react-router-dom'\r\nimport { useDispatch, useSelector } from 'react-redux'\r\nimport { logoutSuccess } from '../Redux/Actions';\r\nimport ProfileImageWithDefault from './ProfileImageWithDefault';\r\n\r\n\r\nconst Topbar = () => {\r\n\r\n    const { username, isLoggedIn, name, image, roles } = useSelector(store => ({\r\n        username: store.username,\r\n        isLoggedIn: store.isLoggedIn,\r\n        name: store.name,\r\n        image: store.image,\r\n        roles: store.roles\r\n    }))\r\n    const isAdmin = roles.some(role => role.name === 'ROLE_ADMIN');\r\n\r\n    const menuArea = useRef(null);\r\n\r\n    const [menuVisible, setMenuVisible] = useState(false);\r\n\r\n    const dispatch = useDispatch();\r\n\r\n    useEffect(() => {\r\n        document.addEventListener('click', menuClickTracker);\r\n        return () => {\r\n            document.removeEventListener('click', menuClickTracker);\r\n        };\r\n    }, [isLoggedIn]);//nereye tıkladığımıza bakıyor\r\n\r\n    const menuClickTracker = event => { //menüyü temsil ediyor meniye koyduk çünkü htmlde\r\n        if (menuArea.current === null || !menuArea.current.contains(event.target)) {\r\n            setMenuVisible(false);\r\n        }\r\n    };\r\n\r\n\r\n    const onLogoutSuccess = () => {\r\n        dispatch(logoutSuccess());\r\n    }\r\n\r\n\r\n    let links = (<ul className='navbar-nav ml-auto'>\r\n        <li>\r\n            <Link className='nav-link' to='/login' >\r\n                Login\r\n            </Link>\r\n        </li>\r\n        <li className='px-4'>\r\n            <Link className='nav-link' to='/signup'>\r\n                Signup\r\n            </Link>\r\n            {/* <Link className='nav-link' to='/ws'>\r\n                chat\r\n            </Link> */}\r\n        </li>\r\n    </ul>\r\n    );\r\n\r\n    if (isLoggedIn) {\r\n        let dropDownClass = 'dropdown-menu p-0 shadow';\r\n        if (menuVisible) {\r\n            dropDownClass += ' show';\r\n        }\r\n        let profileButton = 'navbar-nav ml-auto';\r\n        if (isAdmin) {\r\n            profileButton = 'navbar-nav ml-2';\r\n        }\r\n\r\n        links = (\r\n            <ul className={profileButton} ref={menuArea}>\r\n                <li className='nav-item dropdown'>\r\n\r\n                    <div className='d-flex' style={{ cursor: 'pointer' }}\r\n                        onClick={() => setMenuVisible(true)}>\r\n                        <ProfileImageWithDefault image={image}\r\n                            width=\"32\"\r\n                            height=\"32\" className=\"rounded-circle my-1\" />\r\n                        <span className='nav-link dropdown-toggle'>{name}</span>\r\n                    </div>\r\n\r\n                    <div className={dropDownClass}>\r\n                        <Link className=\"dropdown-item d-flex p-2\" to={`/user/${username}`}\r\n                            onClick={() => setMenuVisible(false)}>\r\n                            <i className=\"material-icons text-info mr-2\">person</i>\r\n                            My Profile\r\n                        </Link>\r\n                        <Link className=\"dropdown-item d-flex p-2\" to={'/addproduct'}>\r\n                            <i className=\"material-icons text-info mr-2\">add_box</i>\r\n                            Add New Product\r\n                        </Link>\r\n\r\n                        <Link className=\"dropdown-item d-flex p-2\" to={'/my-bids'}>\r\n                            <span className=\"material-icons\">done</span>\r\n                            My Bids\r\n                        </Link>\r\n\r\n                        <Link to={'/'}>\r\n                            <span className=\"dropdown-item  d-flex p-2\" onClick={onLogoutSuccess} style={{ cursor: 'pointer' }}>\r\n                                <i className=\"material-icons text-danger mr-2\">power_settings_new</i>\r\n                                Logout\r\n                            </span>\r\n                        </Link>\r\n                    </div>\r\n\r\n                </li>\r\n            </ul>\r\n\r\n        )\r\n    }\r\n\r\n\r\n    return (\r\n        <div >\r\n\r\n            <div className=' shadow-sm bg-light mb-2 d-flex' >\r\n                <nav className='navbar navbar-light bg-light container navbar-expand' >\r\n                    <Link className='navbar-brand ' to='/' >\r\n                        <img src=\"https://thumbs.dreamstime.com/b/auction-banner-template-ribbon-label-sign-177647990.jpg\"\r\n                             width=\"144\" height=\"90\"className=\"d-inline-block align-top\" alt='brand-img' />\r\n                       \r\n                    </Link>\r\n\r\n                    {isAdmin &&\r\n                        <div className='nav-item ml-auto mr-0'>\r\n                            <Link className='nav-link' to='/admin'>\r\n                                <button type=\"button\" className=\"btn btn-secondary\"> Admin Panel </button>\r\n                            </Link>\r\n                        </div>}\r\n                    {links}\r\n\r\n                </nav>\r\n            </div>\r\n\r\n        </div >\r\n    );\r\n};\r\n\r\nexport default Topbar;"],"mappings":"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"},"metadata":{},"sourceType":"module"}